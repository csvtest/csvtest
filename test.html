<html>
    <head>
	    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <!-- Mappa -->
	    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
	    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
            <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" />
            <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"></script>
            <style id="jsbin-css">#map { height: 600px; border:solid;}</style>
       	    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
	    
	    
    </head>
    <body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-lg-6">
				<div id='map'></div>
			</div>
			<div class="col-lg-6">
				<div class="information">
					<canvas id="myChart" width="400" height="400"></canvas>
				</div>
			</div>
		</div>
	</div>
    </body> 

            <!--ajax leaflet DEVO STUDIARMELO -->
            <script src="leaflet.ajax.min.js"></script>
        <!--Script mappa-->
        <script id="jsbin-javascript">
        var map = L.map('map', {
                    maxZoom: 18,
                    minZoom: 12,
		    maxBoundsViscosity: 10000.0
                });
                map.setView([44.4915, 11.3355], 12);
        
        var osm = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);
        
        // var zone = new L.GeoJSON.AJAX("geojson_folder/ZoneBologna.geojson");
	var limiti = map.getBounds();
	map.setMaxBounds(limiti);
		
    $.ajax({
	dataType: "json",
	url: "geojson_folder/ZoneBologna.geojson",
	success: function(data) {
			L.geoJson(data, {
				onEachFeature: onEachFeature
			}).addTo(map);
	}
     }).error(function() {});

    function onEachFeature(feature, layer) {
		layer.bindPopup(feature.properties.Nome_zona);
	    	layer.on('click', function (e) {
			$.ajax({
				dataType: "json",
				url: "geojson_folder/csvjson.json",
				success: function(dati) {
					dati.forEach(function (arrayItem) {
						if (arrayItem["Nome_zona"] == feature.properties.Nome_zona){	
							$('.information').html('');
							$('.information').html(arrayItem["Codice_zona"] + "<br />" + arrayItem["Nome_quartiere"]);
						}
					})
			}
     		}).error(function() {});
	});
    };
	var ctx = document.getElementById("myChart").getContext('2d');
	var myChart = new Chart(ctx, {
	    type: 'bar',
	    data: {
		labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
		datasets: [{
		    label: '# of Votes',
		    data: [12, 19, 3, 5, 2, 3],
		    backgroundColor: [
			'rgba(255, 99, 132, 0.2)',
			'rgba(54, 162, 235, 0.2)',
			'rgba(255, 206, 86, 0.2)',
			'rgba(75, 192, 192, 0.2)',
			'rgba(153, 102, 255, 0.2)',
			'rgba(255, 159, 64, 0.2)'
		    ],
		    borderColor: [
			'rgba(255,99,132,1)',
			'rgba(54, 162, 235, 1)',
			'rgba(255, 206, 86, 1)',
			'rgba(75, 192, 192, 1)',
			'rgba(153, 102, 255, 1)',
			'rgba(255, 159, 64, 1)'
		    ],
		    borderWidth: 1
		}]
	    },
	    options: {
		scales: {
		    yAxes: [{
			ticks: {
			    beginAtZero:true
			}
		    }]
		}
	    }
	});
    </script>
</html>
